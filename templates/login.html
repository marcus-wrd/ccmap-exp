<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link href="/static/style2.css" rel="stylesheet">
    <link rel="manifest" href="static/manifest.webmanifest" crossorigin="use-credentials" />
</head>
<body>
    <div class="form-container">
        <form action="/login" method="post">
            <label for="username"><b>Username</b></label>
            <input type="text" placeholder="Enter Username" name="username" required>

            <label for="password"><b>Password</b></label>
            <input type="password" placeholder="Enter Password" name="password" required>
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
              {% endif %}
            {% endwith %}

            <span>Don't have an account? </span> <span><a href="/register">Register</a></span>

            <input type="submit" value="Login">
        </form>
    </div>
    <script>
        // Service worker registration should be secure
        if ("serviceWorker" in navigator) {
           // Check if the page is served over HTTPS
           if (window.location.protocol === 'https:') {
              navigator.serviceWorker.register("/generate-sw.js");
           } else {
              console.error("Service worker registration failed. The page must be served over HTTPS.");
           }
        }
    </script>
</body>
</html>
